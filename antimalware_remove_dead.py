import os, sys

deaddomains = open('dead.mwbcheck.txt', encoding='UTF-8').read().split("\n")
antimalware = open('antimalware.txt', encoding='UTF-8').read().split("\n")
endantimalware = []
removed_domains = 0
for line in antimalware:
	if line == "" or line.startswith("!") or "/" in line or "#" in line:
		endantimalware.append(line)
		continue
	domain = line[2:].split("^")[0]
	if domain not in deaddomains:
		endantimalware.append(line)
	else:
		removed_domains += 1
print(f"Removed {removed_domains}")
save_confirm = input("Save? (y/n) ")
if save_confirm == 'y':
	antimalware_file = open('antimalware.txt', 'w', encoding="UTF-8")
	antimalware_file.write("\n".join(endantimalware))
	antimalware_file.close()